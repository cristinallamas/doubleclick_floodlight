<?php/** * @file * Admin forms and functinality for floodlight tags. *//** * Form builder for the global floodlight settings form. */function doubleclick_floodlight_admin_settings($form) {  $form['settings'] = array(    '#type' => 'vertical_tabs',  );  $form['#validate'][] = 'doubleclick_floodlight_admin_form_validate';  // Required settings.  $form['required_tag_settings'] = array(    '#type' => 'fieldset',    '#title' => t('Required Tag Settings'),    '#collapsible' => TRUE,    '#collapsed' => FALSE,    '#group' => 'settings',  );  $form['required_tag_settings']['doubleclick_floodlight_enabled'] = array(    '#type' => 'checkbox',    '#title' => t('Enable / Disable'),    '#default_value' => variable_get('doubleclick_floodlight_enabled', 1),    '#description' => t('Sets if the tag will be showing or will be hidden.'),  );  $form['required_tag_settings']['doubleclick_floodlight_account_id'] = array(    '#type' => 'textfield',    '#title' => t('Account ID'),    '#default_value' => variable_get('doubleclick_floodlight_account_id', ''),    '#required' => TRUE,    '#description' => t('Floodlight account id.'),  );  // Optional parameters.  $form['optional_tag_settings'] = array(    '#type' => 'fieldset',    '#title' => t('Optional Tag Parameters'),    '#collapsible' => TRUE,    '#collapsed' => FALSE,    '#group' => 'settings',  );  $form['optional_tag_settings']['doubleclick_floodlight_type'] = array(    '#type' => 'textfield',    '#title' => t('Type - Group Tag String'),    '#required' => FALSE,    '#maxlength' => 255,    '#default_value' => variable_get('doubleclick_floodlight_type', ''),    '#description' => t('Group Tag String'),  );  $form['optional_tag_settings']['doubleclick_floodlight_cat'] = array(    '#type' => 'textfield',    '#title' => t('Cat - Activity Tag String'),    '#default_value' => variable_get('doubleclick_floodlight_cat', ''),    '#description' => t('Activity Tag String'),  );  return system_settings_form($form);}/** * Submit handler for the global settings form. */function doubleclick_floodlight_admin_form_validate($element) {  $settings = $element['required_tag_settings'];  if (empty($settings['doubleclick_floodlight_account_id']['#value']) || $settings['doubleclick_floodlight_account_id']['#value'] == '') {    form_error($settings['doubleclick_floodlight_account_id'], t('You need to enter a user id.'));  }  if (!is_numeric($settings['doubleclick_floodlight_account_id']['#value'])) {    form_error($settings['doubleclick_floodlight_account_id'], t('You need to enter a numeric user id.'));  }}